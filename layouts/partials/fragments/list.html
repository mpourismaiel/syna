{{- $self := . -}}
{{- .page_scratch.Add "js" (dict "file" "syna-collapse.js") -}}

{{- $list_pages := partial "helpers/list-pages.html" (dict "Site" .Site "Params" .Params "root" .root "page_scratch" .page_scratch) -}}
{{- $render_pagination := $list_pages.render_pagination -}}
{{- $sorted_pages := $list_pages.sorted_pages -}}

{{- $bg := .self.Scratch.Get "bg" }}
{{- partial "helpers/container.html" (dict "start" true "in_slot" .in_slot "bg" $bg "Name" .Name "Params" .Params) -}}
  {{- partial "helpers/section-header.html" (dict "self" $self.self "bg" $bg "params" .Params) }}
  <div class="row mx-0
    {{- partial "helpers/text-color.html" (dict "self" $self.self "light" "secondary") -}}
  ">
    {{- $type := cond (eq .Params.tiled true) "tiled" "normal" -}}
    {{- range first (.Params.count | default 10) $sorted_pages -}}
      {{- partial (printf "fragments/types/list/%s.html" $type) (dict "root" $self "article" . "bg" $bg "render_pagination" $render_pagination "sorted_pages" $sorted_pages) }}
    {{- end -}}
  </div>
  {{- if $render_pagination -}}
    {{- partial "helpers/pagination.html" (dict "paginator" .root.Paginator "page_scratch" .page_scratch) -}}
  {{- end }}
{{- partial "helpers/container.html" (dict "end" true "in_slot" .in_slot) -}}
